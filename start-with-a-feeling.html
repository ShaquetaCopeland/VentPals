<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Start With a Feeling ‚Ä¢ VentPals</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
</head>

<body class="bg-gradient-to-br from-pink-100 via-sky-100 to-purple-100 overflow-x-hidden">

  <!-- NAV -->
  <nav class="w-full max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
    <div class="flex items-center gap-2">
      <img src="assets/images/logo.png" class="h-20" alt="VentPals logo">
      <span class="font-bold text-purple-700 text-xl">VentPals</span>
    </div>

    <div class="hidden md:flex gap-6 text-purple-600 font-semibold">
      <a href="index.html" class="hover:text-purple-800">Home</a>
      <a href="circle-hub.html" class="hover:text-purple-800">Circles</a>
      <a href="adult-signup.html" class="hover:text-purple-800">Grown-Ups</a>
      <a href="about.html" class="hover:text-purple-800">About</a>
    </div>
  </nav>

  <!-- HERO -->
  <section class="text-center px-4 pt-10 pb-6 max-w-3xl mx-auto">
    <h1 class="text-4xl sm:text-5xl font-extrabold text-purple-800 mb-3">
      Start With a Feeling
    </h1>
    <p class="text-lg sm:text-xl text-purple-700 mb-4">
      Pick the feeling that matches what‚Äôs happening inside you.
    </p>
    <p class="text-base sm:text-lg text-gray-700">
      You don‚Äôt have to explain it perfectly ‚Äî your VentPal nestling will help you understand it.
    </p>
  </section>

  <!-- FEELING GRID -->
  <section class="py-8 px-4 max-w-6xl mx-auto">
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

      <!-- 1. ANGRY ‚Üí FLAMEZ -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üò°</div>
        <h2 class="font-bold text-purple-800 text-lg">Angry</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when something feels unfair or too big inside.
        </p>
        <img src="assets/images/flamez-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Flamez can help!</p>
        <a href="join.html?bird=flamez"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Flamez!
        </a>
      </div>

      <!-- 2. SAD ‚Üí ECHO -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üò¢</div>
        <h2 class="font-bold text-purple-800 text-lg">Sad</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when something important feels missing.
        </p>
        <img src="assets/images/echo-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Echo can help!</p>
        <a href="join.html?bird=echo"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Echo!
        </a>
      </div>

      <!-- 3. SCARED ‚Üí GUARDIAN -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üò®</div>
        <h2 class="font-bold text-purple-800 text-lg">Scared</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when something feels unsafe or too big.
        </p>
        <img src="assets/images/guardian-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Guardian can help!</p>
        <a href="join.html?bird=guardian"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Guardian!
        </a>
      </div>

      <!-- 4. WORRIED ‚Üí SABLE -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üò∞</div>
        <h2 class="font-bold text-purple-800 text-lg">Worried</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when your brain is trying to protect you.
        </p>
        <img src="assets/images/sable-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Sable can help!</p>
        <a href="join.html?bird=sable"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Sable!
        </a>
      </div>

      <!-- 5. INVISIBLE ‚Üí BREEZY -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üë§</div>
        <h2 class="font-bold text-purple-800 text-lg">Invisible</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when people don‚Äôt see the real you or your hidden struggles.
        </p>
        <img src="assets/images/breezy-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Breezy can help!</p>
        <a href="join.html?bird=breezy"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Breezy
        </a>
      </div>

      <!-- 6. LEFT OUT ‚Üí CLOVER -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üòû</div>
        <h2 class="font-bold text-purple-800 text-lg">Left Out</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when you want to belong but don‚Äôt feel included.
        </p>
        <img src="assets/images/clover-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Clover can help!</p>
        <a href="join.html?bird=clover"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Clover!
        </a>
      </div>

      <!-- 7. LONELY ‚Üí COVE -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üòî</div>
        <h2 class="font-bold text-purple-800 text-lg">Lonely</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when you want closeness or connection.
        </p>
        <img src="assets/images/cove-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Cove can help!</p>
        <a href="join.html?bird=cove"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Cove!
        </a>
      </div>

      <!-- 8. OVERWHELMED ‚Üí SOLACE -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üòµ‚Äçüí´</div>
        <h2 class="font-bold text-purple-800 text-lg">Overwhelmed</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when too many feelings happen at once.
        </p>
        <img src="assets/images/solace-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Solace can help!</p>
        <a href="join.html?bird=solace"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Solace!
        </a>
      </div>

      <!-- 9. CONFUSED ‚Üí DRIFT -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">ü§î</div>
        <h2 class="font-bold text-purple-800 text-lg">Confused</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when you‚Äôre not sure what to think or do.
        </p>
        <img src="assets/images/drift-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Drift can help!</p>
        <a href="join.html?bird=drift"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Drift
        </a>
      </div>

      <!-- 10. EMBARRASSED ‚Üí PEBBLE -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üò≥</div>
        <h2 class="font-bold text-purple-800 text-lg">Embarrassed</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when you feel exposed or unsure about yourself.
        </p>
        <img src="assets/images/pebble-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Pebble can help!</p>
        <a href="join.html?bird=pebble"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Pebble!
        </a>
      </div>

      <!-- 11. HOPEFUL ‚Üí FLICKER -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üåü</div>
        <h2 class="font-bold text-purple-800 text-lg">Hopeful</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when something feels possible again.
        </p>
        <img src="assets/images/flicker-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Flicker can help!</p>
        <a href="join.html?bird=flicker"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Flicker!
        </a>
      </div>

      <!-- 12. CURIOUS ‚Üí TWIG -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üßê</div>
        <h2 class="font-bold text-purple-800 text-lg">Curious</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when something sparks your interest.
        </p>
        <img src="assets/images/twig-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Twig can help!</p>
        <a href="join.html?bird=twig"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Twig!
        </a>
      </div>

      <!-- 13. PROUD ‚Üí FLARE -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üèÖ</div>
        <h2 class="font-bold text-purple-800 text-lg">Proud</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when you did something that matters to you.
        </p>
        <img src="assets/images/flare-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Flare can help!</p>
        <a href="join.html?bird=flare"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Flare!
        </a>
      </div>

      <!-- 14. CALM ‚Üí AURA -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üòå</div>
        <h2 class="font-bold text-purple-800 text-lg">Calm</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when you feel peaceful or steady.
        </p>
        <img src="assets/images/aura-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Aura can help!</p>
        <a href="join.html?bird=aura"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Aura!
        </a>
      </div>

      <!-- 15. GROWING / CHANGING ‚Üí NOVA -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">üå±</div>
        <h2 class="font-bold text-purple-800 text-lg">Growing</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when you‚Äôre becoming more yourself.
        </p>
        <img src="assets/images/nova-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Nova can help!</p>
        <a href="join.html?bird=nova"
           class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Nova!
        </a>
      </div>

      <!-- 16. STUCK ‚Üí LUMEN -->
      <div class="bg-white/90 rounded-2xl shadow-md p-4 flex flex-col items-center text-center">
        <div class="text-5xl mb-2">ü™®</div>
        <h2 class="font-bold text-purple-800 text-lg">Stuck</h2>
        <p class="text-sm text-gray-700 mb-3">
          This feeling shows up when you want to move forward but can‚Äôt yet.
        </p>
        <img src="assets/images/lumen-nestling.png" class="h-20 mb-2">
        <p class="text-sm text-purple-800 font-semibold mb-3">Lumen can help!</p>
        <a href="join.html?bird=lumen"
        class="bg-purple-200 hover:bg-purple-300 text-purple-800 font-bold py-2 px-4 rounded-full text-sm">
          I feel like Lumen!
        </a>
      </div>
      </div>

    </div> <!-- end grid -->
  </section> <!-- end feeling grid section -->

  <!-- FOOTER (optional, can be empty or removed) -->
  <footer class="py-8 text-center text-gray-500 text-sm">
    <!-- You can add footer content later if you want -->
  </footer>
  <!-- VENTPALS FEELING POPUP -->
  <div id="feeling-popup-overlay"
       class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 backdrop-blur-sm">
    
    <!-- Popup inner wrapper (for zoom + centering) -->
    <div id="feeling-popup"
     class="relative w-full max-w-lg mx-4 bg-white/95 rounded-3xl shadow-2xl p-6 sm:p-8 transition-all duration-250 ease-out">

      <!-- Floating feeling emojis (background layer) -->
      <div id="floating-emoji-layer" class="pointer-events-none absolute inset-0 overflow-hidden rounded-3xl"></div>

      <!-- Close button (top-right, explicit only) -->
      <button id="feeling-popup-close"
              class="absolute top-3 right-3 sm:top-4 sm:right-4 h-8 w-8 rounded-full bg-white/80 shadow-md flex items-center justify-center text-purple-700 hover:bg-purple-100 text-lg font-bold"
              aria-label="Close">
        √ó
      </button>

      <!-- POPUP CONTENT -->
      <div class="relative z-10 flex flex-col items-center text-center gap-4">

        <!-- Feeling emoji + title -->
        <div class="flex flex-col items-center gap-1">
          <div id="popup-feeling-emoji" class="text-5xl mb-1">üò¢</div>
          <h2 id="popup-feeling-title" class="text-xl sm:text-2xl font-extrabold text-purple-800">
            This Feeling
          </h2>
        </div>

        <!-- Gentle intro text -->
        <p id="popup-feeling-intro"
           class="text-sm sm:text-base text-gray-700 max-w-md">
          Let‚Äôs take a moment together and understand this feeling a little more.
        </p>

        <!-- CLARITY CHECK PANEL -->
        <div id="clarity-panel" class="w-full mt-2">
          <p class="text-sm sm:text-base text-purple-800 font-semibold mb-3">
            Do you feel this feeling a lot, sometimes, or just right now?
          </p>

          <div class="flex flex-col gap-2">
            <button data-clarity="all"
                    class="w-full py-2.5 px-4 rounded-full bg-purple-100 hover:bg-purple-200 text-purple-800 font-semibold text-sm sm:text-base">
              All of the time
            </button>

            <button data-clarity="sometimes"
                    class="w-full py-2.5 px-4 rounded-full bg-sky-100 hover:bg-sky-200 text-sky-800 font-semibold text-sm sm:text-base">
              Sometimes
            </button>

            <button data-clarity="just-now"
                    class="w-full py-2.5 px-4 rounded-full bg-pink-100 hover:bg-pink-200 text-pink-800 font-semibold text-sm sm:text-base">
              Just right now
            </button>
          </div>

          <!-- Gentle explanation for "just now" (hidden until needed) -->
          <div id="just-now-message" class="hidden mt-4 text-xs sm:text-sm text-gray-700 max-w-md mx-auto">
            <p class="mb-3">
              I know you‚Äôre feeling this right now, and this bird can help when you feel this way.
              But for choosing your VentPal ‚Äî let‚Äôs find the bird that reminds you of <span class="font-semibold">you</span>
              when you feel like <span class="font-semibold">you</span> the most.
            </p>
            <button id="back-to-feelings"
                    class="inline-flex items-center justify-center px-4 py-2 rounded-full bg-purple-100 hover:bg-purple-200 text-purple-800 font-semibold text-xs sm:text-sm">
              Go back to feelings
            </button>
          </div>
        </div>

        <!-- RECOMMENDED BIRDS PANEL -->
        <div id="recommended-birds-panel" class="w-full mt-4 hidden">
          <p class="text-sm sm:text-base text-purple-800 font-semibold mb-3">
            Here are some nestlings who understand this feeling:
          </p>

          <div id="recommended-birds-list" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
            <!-- JS will inject recommended birds here -->
          </div>

          <button id="see-all-birds"
                  class="mt-4 w-full py-2.5 px-4 rounded-full bg-white border border-purple-200 text-purple-700 hover:bg-purple-50 text-sm sm:text-base font-semibold">
            Not feeling these? See all birds.
          </button>
        </div>

        <!-- ALL BIRDS PANEL -->
        <div id="all-birds-panel" class="w-full mt-4 hidden">
          <p class="text-sm sm:text-base text-purple-800 font-semibold mb-3">
            Here‚Äôs the whole flock. Pick the nestling that feels most like you.
          </p>

          <div id="all-birds-list" class="grid grid-cols-2 sm:grid-cols-3 gap-3 max-h-72 overflow-y-auto pr-1">
            <!-- JS will inject all 16 birds here -->
          </div>

          <button id="back-to-recommended"
                  class="mt-4 w-full py-2.5 px-4 rounded-full bg-purple-100 hover:bg-purple-200 text-purple-800 text-sm sm:text-base font-semibold">
            Back to recommended birds
          </button>
        </div>

      </div>
    </div>
  </div>
 <!-- END VENTPALS FEELING POPUP -->

<script>
document.addEventListener("DOMContentLoaded", () => {

  /* ----------------------------------------------------------
     FEELING ‚Üí BIRD MAPPING (your canon)
  ---------------------------------------------------------- */
  const feelingMap = {
    "Angry":       { emoji: "üò°", bird: "flamez" },
    "Sad":         { emoji: "üò¢", bird: "echo" },
    "Scared":      { emoji: "üò®", bird: "guardian" },
    "Worried":     { emoji: "üò∞", bird: "sable" },
    "Invisible":   { emoji: "üë§", bird: "breezy" },
    "Left Out":    { emoji: "üòû", bird: "clover" },
    "Lonely":      { emoji: "üòî", bird: "cove" },
    "Overwhelmed": { emoji: "üòµ‚Äçüí´", bird: "solace" },
    "Confused":    { emoji: "ü§î", bird: "drift" },
    "Embarrassed": { emoji: "üò≥", bird: "pebble" },
    "Hopeful":     { emoji: "üåü", bird: "flicker" },
    "Curious":     { emoji: "üßê", bird: "twig" },
    "Proud":       { emoji: "üèÖ", bird: "flare" },
    "Calm":        { emoji: "üòå", bird: "aura" },
    "Growing":     { emoji: "üå±", bird: "nova" },
    "Stuck":       { emoji: "ü™®", bird: "lumen" }
  };

  /* ----------------------------------------------------------
     ALL BIRDS LIST (for "See All Birds")
  ---------------------------------------------------------- */
  const allBirds = [
    { name: "Flamez",   id: "flamez",   img: "assets/images/flamez-nestling.png" },
    { name: "Echo",     id: "echo",     img: "assets/images/echo-nestling.png" },
    { name: "Guardian", id: "guardian", img: "assets/images/guardian-nestling.png" },
    { name: "Sable",    id: "sable",    img: "assets/images/sable-nestling.png" },
    { name: "Breezy",   id: "breezy",   img: "assets/images/breezy-nestling.png" },
    { name: "Clover",   id: "clover",   img: "assets/images/clover-nestling.png" },
    { name: "Cove",     id: "cove",     img: "assets/images/cove-nestling.png" },
    { name: "Solace",   id: "solace",   img: "assets/images/solace-nestling.png" },
    { name: "Drift",    id: "drift",    img: "assets/images/drift-nestling.png" },
    { name: "Pebble",   id: "pebble",   img: "assets/images/pebble-nestling.png" },
    { name: "Flicker",  id: "flicker",  img: "assets/images/flicker-nestling.png" },
    { name: "Twig",     id: "twig",     img: "assets/images/twig-nestling.png" },
    { name: "Flare",    id: "flare",    img: "assets/images/flare-nestling.png" },
    { name: "Aura",     id: "aura",     img: "assets/images/aura-nestling.png" },
    { name: "Nova",     id: "nova",     img: "assets/images/nova-nestling.png" },
    { name: "Lumen",    id: "lumen",    img: "assets/images/lumen-nestling.png" }
  ];

  /* ----------------------------------------------------------
     DOM ELEMENTS
  ---------------------------------------------------------- */
  const overlay = document.getElementById("feeling-popup-overlay");
  const popup = document.getElementById("feeling-popup");
  const closeBtn = document.getElementById("feeling-popup-close");

  const emojiLayer = document.getElementById("floating-emoji-layer");
  const popupEmoji = document.getElementById("popup-feeling-emoji");
  const popupTitle = document.getElementById("popup-feeling-title");

  const clarityPanel = document.getElementById("clarity-panel");
  const justNowMessage = document.getElementById("just-now-message");
  const backToFeelingsBtn = document.getElementById("back-to-feelings");

  const recommendedPanel = document.getElementById("recommended-birds-panel");
  const recommendedList = document.getElementById("recommended-birds-list");
  const seeAllBtn = document.getElementById("see-all-birds");

  const allBirdsPanel = document.getElementById("all-birds-panel");
  const allBirdsList = document.getElementById("all-birds-list");
  const backToRecommendedBtn = document.getElementById("back-to-recommended");

  let currentFeeling = null;

  /* ----------------------------------------------------------
     OPEN POPUP
  ---------------------------------------------------------- */
  function openPopup(feelingName) {
    currentFeeling = feelingName;
    const data = feelingMap[feelingName];

    popupEmoji.textContent = data.emoji;
    popupTitle.textContent = feelingName;

    clarityPanel.classList.remove("hidden");
    recommendedPanel.classList.add("hidden");
    allBirdsPanel.classList.add("hidden");
    justNowMessage.classList.add("hidden");

    emojiLayer.innerHTML = "";
    spawnFloatingEmojis(data.emoji);

    overlay.classList.remove("hidden");
    setTimeout(() => popup.classList.add("show"), 10);
  }

  /* ----------------------------------------------------------
     CLOSE POPUP
  ---------------------------------------------------------- */
  function closePopup() {
    popup.classList.remove("show");
    setTimeout(() => overlay.classList.add("hidden"), 200);
  }

  closeBtn.addEventListener("click", closePopup);

  /* ----------------------------------------------------------
     FLOATING EMOJIS
  ---------------------------------------------------------- */
  function spawnFloatingEmojis(emoji) {
    for (let i = 0; i < 12; i++) {
      const span = document.createElement("span");
      span.className = "floating-emoji";
      span.textContent = emoji;
      span.style.left = Math.random() * 90 + "%";
      span.style.animationDelay = (Math.random() * 3) + "s";
      emojiLayer.appendChild(span);
    }
  }

  /* ----------------------------------------------------------
     CLARITY CHECK HANDLERS
  ---------------------------------------------------------- */
  clarityPanel.querySelectorAll("button[data-clarity]").forEach(btn => {
    btn.addEventListener("click", () => {
      const type = btn.dataset.clarity;

      if (type === "just-now") {
        clarityPanel.classList.add("hidden");
        justNowMessage.classList.remove("hidden");
        return;
      }

      clarityPanel.classList.add("hidden");
      loadRecommendedBird();
      recommendedPanel.classList.remove("hidden");
    });
  });

  backToFeelingsBtn.addEventListener("click", () => {
    closePopup();
  });

  /* ----------------------------------------------------------
     LOAD RECOMMENDED BIRD
  ---------------------------------------------------------- */
  function loadRecommendedBird() {
    const data = feelingMap[currentFeeling];
    const birdId = data.bird;

    recommendedList.innerHTML = "";

    const bird = allBirds.find(b => b.id === birdId);

    const card = document.createElement("div");
    card.className = "bg-white/90 rounded-2xl shadow p-3 flex flex-col items-center text-center bird-breathing";

    card.innerHTML = `
      <img src="${bird.img}" class="h-20 mb-2">
      <p class="font-bold text-purple-800">${bird.name}</p>
      <button class="mt-2 px-4 py-2 rounded-full bg-purple-200 hover:bg-purple-300 text-purple-800 font-semibold text-sm">
        Choose Me
      </button>
    `;

    card.querySelector("button").addEventListener("click", () => {
      window.location.href = "join.html?bird=" + bird.id;
    });

    recommendedList.appendChild(card);
  }

  /* ----------------------------------------------------------
     SEE ALL BIRDS
  ---------------------------------------------------------- */
  seeAllBtn.addEventListener("click", () => {
    recommendedPanel.classList.add("hidden");
    loadAllBirds();
    allBirdsPanel.classList.remove("hidden");
  });

  backToRecommendedBtn.addEventListener("click", () => {
    allBirdsPanel.classList.add("hidden");
    recommendedPanel.classList.remove("hidden");
  });

  function loadAllBirds() {
    allBirdsList.innerHTML = "";

    allBirds.forEach(bird => {
      const card = document.createElement("div");
      card.className = "bg-white/90 rounded-2xl shadow p-3 flex flex-col items-center text-center bird-breathing";

      card.innerHTML = `
        <img src="${bird.img}" class="h-16 mb-1">
        <p class="font-bold text-purple-800 text-sm">${bird.name}</p>
        <button class="mt-1 px-3 py-1.5 rounded-full bg-purple-200 hover:bg-purple-300 text-purple-800 font-semibold text-xs">
          Choose Me
        </button>
      `;

      card.querySelector("button").addEventListener("click", () => {
        window.location.href = "join.html?bird=" + bird.id;
      });

      allBirdsList.appendChild(card);
    });
  }

  /* ----------------------------------------------------------
     MAKE ALL FEELING CARDS CLICKABLE (corrected selector)
  ---------------------------------------------------------- */
  document.querySelectorAll(".grid .bg-white\\/90").forEach(card => {
    const title = card.querySelector("h2");
    if (!title) return;

    const feelingName = title.textContent.trim();

    card.style.cursor = "pointer";

    card.addEventListener("click", () => {
      openPopup(feelingName);
    });
  });

});
</script>

</body>
</html>
